(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{55:function(e,t,n){},56:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(22),s=n.n(r),i=(n(55),n(56),n(5)),o=n.n(i),l=n(8),u=n(10),p=n(11),d=n(14),j=n(9),b=n(91),h=n(92),f=n(93),O=n(94),x=n(95),m=n(96),g=n(97),v="USER_SIGNIN_REQUEST",y="USER_SIGNIN_SUCCESS",S="USER_SIGNIN_FAIL",_="USER_REGISTER_REQUEST",E="USER_REGISTER_SUCCESS",w="USER_REGISTER_FAIL",k="PROFILE_PICTURE_UPLOAD_REQUEST",U="PROFILE_PICTURE_UPLOAD_SUCCESS",I="PROFILE_PICTURE_UPLOAD_FAIL",T="PROFILE_PICTURE_UPDATE_REQUEST",C="PROFILE_PICTURE_UPDATE_SUCCESS",N="PROFILE_PICTURE_UPDATE_FAIL",L="LOGGED_USER_INFO_REQUEST",R="LOGGED_USER_INFO_SUCCESS",A="LOGGED_USER_INFO_FAIL",P="EXTERNAL_USER_FETCH_REQUEST",F="EXTERNAL_USER_FETCH_SUCCESS",B="EXTERNAL_USER_FETCH_FAIL",D="USER_FOLLOW_REQUEST",G="USER_FOLLOW_SUCCESS",M="USER_FOLLOW_FAIL",Q="USER_UNFOLLOW_SUCCESS",W="USER_UNFOLLOW_FAIL",z=n(12),Y=n.n(z),J=function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(a){var c,r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:v,payload:{email:e,password:t}}),n.prev=1,n.next=4,Y.a.post("/signin",{email:e,password:t});case 4:c=n.sent,r=c.data,a({type:y,payload:r}),localStorage.setItem("jwt",r.token),localStorage.setItem("userInfo",JSON.stringify(r)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),a({type:S,payload:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},K=function(e,t,n,a){return function(){var c=Object(l.a)(o.a.mark((function c(r){var s,i,l,u;return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Y.a.post("https://api.cloudinary.com/v1_1/devm0uxsj/image/upload",a);case 3:return s=c.sent,i=s.data.url,c.prev=5,c.next=8,Y.a.post("/signup",{name:e,email:t,password:n,url:i});case 8:l=c.sent,u=l.data,r({type:E,payload:u}),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(5),r({type:w,payload:c.t0.message});case 16:r({type:U,payload:s}),c.next=22;break;case 19:c.prev=19,c.t1=c.catch(0),r({type:I,payload:c.t1.message});case 22:case"end":return c.stop()}}),c,null,[[0,19],[5,13]])})));return function(e){return c.apply(this,arguments)}}()},H=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e&&e.clear(),n({type:"USER_LOGOUT_SUCCESS",payload:e})}catch(a){n({type:w,payload:a.message})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},X=n(0),q=[{link:"/profile",title:"Profile"},{link:"/create",title:"Create"},{link:"/myfollowingposts",title:"My Follwing Posts"}],V=[{link:"signin",title:"Signin"},{link:"signup",title:"Signup"}],Z=function(){var e=Object(j.c)((function(e){return e.user})),t=(e.loading,e.loggedUserInfo),n=Object(a.useState)(),r=Object(u.a)(n,2),s=r[0],i=r[1];console.log("INFO",e),Object(a.useEffect)((function(){t&&i(t)}),[t]);var v=Object(j.b)(),y=Object(p.f)(),S=Object(a.useState)(!1),_=Object(u.a)(S,2),E=_[0],w=_[1],k=Object(a.useState)(0),U=Object(u.a)(k,2),I=U[0],T=U[1],C=function(e){var t=[];return e.map((function(e,n){return t.push(Object(X.jsx)(b.a,{className:"navitems",children:Object(X.jsx)(d.c,{to:e.link,onClick:function(){return T(n)},className:"nav-link-style ".concat(I===n?"active":""),children:e.title})}))})),t};return Object(X.jsx)("div",{children:Object(X.jsxs)(h.a,{expand:"sm",className:"navbar-container",children:[Object(X.jsx)(f.a,{children:Object(X.jsx)("div",{children:Object(X.jsxs)("h2",{style:{marginLeft:"10px"},onClick:function(){s?y.push("/"):y.push("/signin")},children:["Instagram"," "]})})}),Object(X.jsx)(O.a,{onClick:function(){w(!E)}}),Object(X.jsxs)(x.a,{isOpen:E,navbar:!0,className:"custom-nav",children:[Object(X.jsx)(m.a,{navbar:!0,children:s?Object(X.jsx)(c.a.Fragment,{children:C(q)}):s?void 0:Object(X.jsx)(c.a.Fragment,{children:C(V)})}),Object(X.jsx)("div",{className:"logout-button",children:s?Object(X.jsx)(g.a,{color:"secondary",onClick:Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(H(localStorage));case 2:return e.next=4,i(null);case 4:y.push("/signin");case 5:case"end":return e.stop()}}),e)}))),children:"LOGOUT"}):""})]})]})})},$=n(20),ee=n(98),te=n(104),ne=n(105),ae=n(106),ce=n(99),re=n(100),se=n(101),ie=n(102),oe=n(103),le="POST_LIST_REQUEST",ue="POST_LIST_SUCCESS",pe="POST_LIST_FAIL",de="POST_LIKE_REQUEST",je="POST_LIKE_SUCCESS",be="POST_LIKE_FAIL",he="POST_UNLIKE_REQUEST",fe="POST_UNLIKE_SUCCESS",Oe="POST_UNLIKE_FAIL",xe="POST_COMMENT_REQUEST",me="POST_COMMENT_SUCCESS",ge="POST_COMMENT_FAIL",ve="POST_DELETE_REQUEST",ye="POST_DELETE_SUCCESS",Se="POST_DELETE_FAIL",_e="POST_CREATE_REQUEST",Ee="POST_CREATE_SUCCESS",we="POST_CREATE_FAIL",ke="POST_PICTURE_UPLOAD_SUCCESS",Ue="POST_PICTURE_UPLOAD_FAIL",Ie="MY_POSTS_GET_REQUEST",Te="MY_POSTS_GET_SUCCESS",Ce="MY_POSTS_GET_FAIL",Ne="MY_FOLLOWERS_POSTS_GET_REQUEST",Le="MY_FOLLOWERS_POSTS_GET_SUCCESS",Re="MY_FOLLOWERS_POSTS_GET_FAIL",Ae=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){var a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:le}),t.prev=1,t.next=4,Y.a.get("/allpost",{headers:{Authorization:"Bearer "+e}});case 4:a=t.sent,c=a.data,n({type:ue,payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:pe,payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},Pe=function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(a){var c,r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:de}),n.prev=1,n.next=4,Y.a.put("/like",{postId:e},{headers:{Authorization:"Bearer "+t}});case 4:c=n.sent,r=c.data,console.log("DATA",r),a({type:je,payload:r}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),a({type:be,payload:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()},Fe=function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(a){var c,r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:he}),n.prev=1,n.next=4,Y.a.put("/unlike",{postId:e},{headers:{Authorization:"Bearer "+t}});case 4:c=n.sent,r=c.data,a({type:fe,payload:r}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),a({type:Oe,payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},Be=function(e,t,n){return function(){var a=Object(l.a)(o.a.mark((function a(c){var r,s;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c({type:xe}),a.prev=1,a.next=4,Y.a.put("/comment",{postId:e,text:t},{headers:{Authorization:"Bearer "+n}});case 4:r=a.sent,s=r.data,c({type:me,payload:s}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),c({type:ge,payload:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()},De=function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(a){var c,r,s;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:ve}),n.prev=1,n.next=4,Y.a.delete("/deletepost/".concat(e),{headers:{Authorization:"Bearer "+t}});case 4:c=n.sent,r=c.data,s=r.filter((function(t){return t._id!==e})),a({type:ye,payload:s}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),a({type:Se,payload:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()},Ge=function(e,t,n,a){return function(){var c=Object(l.a)(o.a.mark((function c(r){var s,i,l,u;return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r({type:_e}),c.prev=1,c.next=4,Y.a.post("https://api.cloudinary.com/v1_1/devm0uxsj/image/upload",n);case 4:return s=c.sent,i=s.data.url,c.prev=6,c.next=9,Y.a.post("/createpost",{title:e,body:t,pic:i},{headers:{Authorization:"Bearer "+a}});case 9:l=c.sent,u=l.data,r({type:Ee,payload:u}),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(6),r({type:we,payload:c.t0.message});case 17:r({type:ke,payload:s}),c.next=23;break;case 20:c.prev=20,c.t1=c.catch(1),r({type:Ue,payload:c.t1.message});case 23:case"end":return c.stop()}}),c,null,[[1,20],[6,14]])})));return function(e){return c.apply(this,arguments)}}()},Me=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){var a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:Ne}),t.prev=1,t.next=4,Y.a.get("/getsubpost",{headers:{Authorization:"Bearer "+e}});case 4:a=t.sent,c=a.data,n({type:Le,payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:Re});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},Qe=function(e){var t=Object(p.f)(),n=Object(a.useState)(),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(),b=Object(u.a)(i,2),h=b[0],f=b[1],O=localStorage.getItem("jwt"),x=localStorage.getItem("userInfo"),m=Object(j.c)((function(e){return e.user})),g=m.loading,v=m.loggedUserInfo,y=(m.error,Object(j.c)((function(e){return e.posts.posts})));Object(a.useEffect)((function(){y&&f(y.posts)}),[y]);var S=Object(j.b)(),_=function(e,t,n){k(e,t,n),E(t)},E=function(e){var t=Object($.a)(h),n=v.user._id;t[e].likes.includes(n)?t[e].likes.pop(n):t[e].likes.push(n),f(t)},w=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(De(t,O));case 2:(a=Object($.a)(h)).splice(n,1),console.log("DELETED DATA",a),f(a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(e,t,n){"like"===e&&U(n),"unlike"===e&&I(n)},U=function(e){return S(Pe(e,O))},I=function(e){return S(Fe(e,O))};Object(a.useEffect)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x||r||t.push("/signin"),x&&!g&&s(JSON.parse(x).user._id),"/"!==window.location.pathname){e.next=5;break}return e.next=5,S(Ae(O));case 5:if("/myfollowingposts"!==window.location.pathname){e.next=8;break}return e.next=8,S(Me(O));case 8:case"end":return e.stop()}}),e)}))),[x,window.location.pathname]);var T=function(e,t){return Object(X.jsx)(ee.a,{sm:"12",md:"6",lg:"4",children:Object(X.jsxs)(ce.a,{children:[Object(X.jsx)(re.a,{children:Object(X.jsx)(se.a,{children:Object(X.jsxs)("h4",{className:"card-user-names",children:[Object(X.jsx)(d.b,{to:e.postedBy._id!==r?"/profile/".concat(e.postedBy._id):"/profile",children:e.postedBy.name}),e.postedBy._id==r&&Object(X.jsx)("i",{className:"material-icons",style:{cursor:"pointer",float:"right"},onClick:function(){return w(e._id,t)},children:"delete"})]})})}),Object(X.jsx)("div",{className:"image-container",children:Object(X.jsx)("img",{src:e.photo,alt:"Card image cap"})}),Object(X.jsxs)(re.a,{children:[Object(X.jsxs)("i",{className:"material-icons",style:{color:"red"},children:[e.likes.includes(r)?Object(X.jsx)("i",{className:"material-icons like-button",onClick:function(){_("unlike",t,e._id)},children:"thumb_down"}):Object(X.jsx)("i",{className:"material-icons like-button",onClick:function(){_("like",t,e._id)},children:"thumb_up"}),"favorite"]}),Object(X.jsxs)("h6",{children:[e.likes.length," likes "]}),Object(X.jsx)("h6",{children:e.title}),Object(X.jsx)("p",{children:e.body}),Object(X.jsx)("div",{className:"comments-container",children:e.comments.map((function(e){return Object(X.jsxs)("h6",{children:[Object(X.jsxs)("span",{style:{fontWeight:"500"},children:[e.postedBy.name,":"]}),Object(X.jsxs)("span",{style:{fontWeight:"350"},children:[" ",e.text]})]},e._id)}))}),Object(X.jsx)("form",{onSubmit:function(n){n.preventDefault(),function(e,t,n){S(Be(e,t,O));var a=Object($.a)(h),c=v.user._id;a[n].comments.push({text:t,postedBy:{name:v.user.name,id:c},_id:"".concat(Math.random(0,2e8))}),f(a)}(e._id,n.target[0].value,t),n.target[0].value=""},children:Object(X.jsx)(ie.a,{children:Object(X.jsx)(oe.a,{placeholder:"Add comment"})})})]})]})})};return Object(X.jsx)(te.a,{style:{marginTop:"40px"},children:Object(X.jsx)(ne.a,{children:h&&"/"===window.location.pathname?h.map((function(e,t){return T(e,t)})):Object(X.jsx)("div",{className:"text-center p-5",children:Object(X.jsx)(ae.a,{color:"primary"})})})})},We=function(){var e=Object(p.f)(),t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),b=i[0],h=i[1],f=Object(j.b)(),O=Object(j.c)((function(e){return e.user.userInfo}));console.log("logged user",O);var x=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(J(b,c));case 2:e.push("/");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(X.jsx)(te.a,{className:"form-container",children:Object(X.jsx)(ne.a,{className:"justify-content-md-center card",children:Object(X.jsx)(ee.a,{md:"auto",children:Object(X.jsxs)("div",{className:"mycard",children:[Object(X.jsx)("h2",{style:{margin:"15px 0 15px 0"},children:"Instagram"}),Object(X.jsx)(oe.a,{type:"email",placeholder:"email",value:b,onChange:function(e){return h(e.target.value)}}),Object(X.jsx)(oe.a,{type:"password",placeholder:"password",value:c,onChange:function(e){return r(e.target.value)}}),Object(X.jsx)("div",{className:"signin-button",children:Object(X.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){return x()},children:"Login"})}),Object(X.jsx)("h5",{children:Object(X.jsx)(d.b,{to:"/signup",children:"Don't have an account ?"})})]})})})})},ze=function(){var e=Object(j.b)(),t=localStorage.getItem("jwt");Object(a.useEffect)((function(){e(function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){var a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:Ie}),t.prev=1,t.next=4,Y.a.get("/myposts",{headers:{Authorization:"Bearer "+e}});case 4:a=t.sent,c=a.data,n({type:Te,payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:Ce,payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]);var n=Object(a.useState)([]),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(j.c)((function(e){return e.posts.myPosts})),p=Object(j.c)((function(e){return e.user.loggedUserInfo}));Object(a.useEffect)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=3;break}return e.next=3,s(i.mypost);case 3:case"end":return e.stop()}}),e)}))),[i]);var d=function(t){var n=localStorage.getItem("jwt"),a=new FormData;a.append("file",t),a.append("upload_preset","insta-clone"),a.append("cloud_name","devm0uxsj"),e(function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(a){var c,r,s,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Y.a.post("https://api.cloudinary.com/v1_1/devm0uxsj/image/upload",e);case 3:return c=n.sent,r=c.data.url,n.prev=5,n.next=8,Y.a.put("/updatepic",{pic:r},{headers:{Authorization:"Bearer "+t}});case 8:s=n.sent,i=s.data,console.log("DATA",i),a({type:C,payload:i}),n.next=16;break;case 14:n.prev=14,n.t0=n.catch(5);case 16:n.next=21;break;case 18:n.prev=18,n.t1=n.catch(0),a({type:I,payload:n.t1.message});case 21:case"end":return n.stop()}}),n,null,[[0,18],[5,14]])})));return function(e){return n.apply(this,arguments)}}()}(a,n))};return Object(X.jsx)("div",{children:r.length<1?Object(X.jsxs)("div",{children:[" ",Object(X.jsx)(te.a,{children:Object(X.jsxs)(ne.a,{children:[Object(X.jsxs)(ee.a,{sm:"3",className:"d-flex flex-column ",children:[Object(X.jsx)("img",{src:p?p.user.pic:"Loading...",style:{width:"160px",height:"160px",borderRadius:"80px",padding:"20px",margin:" 0 auto"}}),Object(X.jsxs)("label",{className:"custom-file-upload",children:["Upload",Object(X.jsx)("input",{type:"file",onChange:function(e){d(e.target.files[0])}})]})]}),Object(X.jsx)(ee.a,{sm:"10",md:"6",children:Object(X.jsxs)("div",{children:[Object(X.jsx)("h4",{children:p?p.user.name:"loading"}),Object(X.jsx)("h4",{children:p?p.user.email:"loading"}),Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(X.jsxs)("h6",{children:[r.length," posts"]}),Object(X.jsxs)("h6",{children:[p&&p.user.followers.length," followers"]}),Object(X.jsxs)("h6",{children:[p&&p.user.following.length," following"]})]})]})})]})})]}):Object(X.jsxs)(te.a,{children:[Object(X.jsx)(te.a,{children:Object(X.jsxs)(ne.a,{children:[Object(X.jsxs)(ee.a,{sm:"3",className:"d-flex flex-column ",children:[Object(X.jsx)("img",{src:p?p.user.pic:"Loading...",style:{width:"160px",height:"160px",borderRadius:"80px",padding:"20px",margin:" 0 auto"}}),Object(X.jsxs)("label",{className:"custom-file-upload",children:["Upload",Object(X.jsx)("input",{type:"file",onChange:function(e){d(e.target.files[0])}})]})]}),Object(X.jsx)(ee.a,{sm:"10",md:"6",children:Object(X.jsxs)("div",{children:[Object(X.jsx)("h4",{children:p?p.user.name:"loading"}),Object(X.jsx)("h4",{children:p?p.user.email:"loading"}),Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(X.jsxs)("h6",{children:[r.length," posts"]}),Object(X.jsxs)("h6",{children:[p&&p.user.followers.length," followers"]}),Object(X.jsxs)("h6",{children:[p&&p.user.following.length," following"]})]})]})})]})}),Object(X.jsx)(te.a,{style:{marginTop:"90px"},children:Object(X.jsx)(ne.a,{xs:"12",sm:"2",md:"4",children:i&&r.map((function(e){return Object(X.jsx)("img",{style:{marginBottom:"20px"},className:"item",src:e.photo,alt:e.title},e._id)}))})})]})})},Ye=function(){var e=Object(p.f)(),t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),b=i[0],h=i[1],f=Object(a.useState)(""),O=Object(u.a)(f,2),x=O[0],m=O[1],g=Object(a.useState)(""),v=Object(u.a)(g,2),y=v[0],S=v[1];console.log("image",y);var _=Object(j.b)(),E=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=new FormData).append("file",y),n.append("upload_preset","insta-clone"),n.append("cloud_name","devm0uxsj"),_(K(c,x,b,n)),e.push("/signin");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(X.jsx)(te.a,{className:"form-container",children:Object(X.jsx)(ne.a,{className:"justify-content-md-center card",children:Object(X.jsx)(ee.a,{md:"auto",children:Object(X.jsxs)("div",{className:"mycard",children:[Object(X.jsx)("h2",{style:{margin:"15px 0 15px 0"},children:"Instagram"}),Object(X.jsx)(oe.a,{className:"input-field",type:"text",placeholder:"name",value:c,onChange:function(e){return r(e.target.value)}}),Object(X.jsx)(oe.a,{className:"input-field",type:"email",placeholder:"email",value:x,onChange:function(e){return m(e.target.value)}}),Object(X.jsx)(oe.a,{className:"input-field",type:"password",placeholder:"password",value:b,onChange:function(e){return h(e.target.value)}}),Object(X.jsxs)("div",{className:"file-field input-field",children:[Object(X.jsx)("span",{className:"upload-button ",children:"Upload pic"}),Object(X.jsx)(oe.a,{className:"input-field",type:"file",onChange:function(e){return S(e.target.files[0])}})]}),Object(X.jsx)("div",{className:"signin-button",children:Object(X.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){return E()},children:"SignUp"})}),Object(X.jsx)("h5",{children:Object(X.jsx)(d.b,{to:"/signin",children:"Already have an account ?"})})]})})})})},Je=(n(88),function(){var e=Object(p.f)(),t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),d=i[0],b=i[1],h=Object(a.useState)(""),f=Object(u.a)(h,2),O=f[0],x=f[1],m=Object(j.b)(),g=localStorage.getItem("jwt"),v=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("file",O),n.append("upload_preset","insta-clone"),n.append("cloud_name","devm0uxsj"),t.next=6,m(Ge(c,d,n,g));case 6:return t.next=8,e.push("/");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(X.jsxs)("div",{className:"card input-filed",style:{margin:"30px auto",maxWidth:"500px",padding:"20px",textAlign:"center"},children:[Object(X.jsx)("input",{type:"text",placeholder:"title",value:c,onChange:function(e){return r(e.target.value)}}),Object(X.jsx)("input",{type:"text",placeholder:"body",value:d,onChange:function(e){return b(e.target.value)}}),Object(X.jsxs)("div",{className:"file-field input-field",children:[Object(X.jsxs)("div",{className:"btn #64b5f6 blue darken-1",children:[Object(X.jsx)("span",{children:"Upload Image"}),Object(X.jsx)("input",{type:"file",onChange:function(e){return x(e.target.files[0])}})]}),Object(X.jsx)("div",{className:"file-path-wrapper",children:Object(X.jsx)("input",{className:"file-path validate",type:"text"})})]}),Object(X.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){return v()},children:"Submit post"})]})}),Ke=(n(89),function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=(t[0],t[1],Object(a.useState)()),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(j.c)((function(e){return e.user.externalFetchedUserInfo})),d=Object(p.g)().userid,b=Object(j.b)(),h=localStorage.getItem("jwt"),f=JSON.parse(localStorage.getItem("userInfo")).user._id;Object(a.useEffect)((function(){b(function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(a){var c,r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:P}),n.prev=1,n.next=4,Y.a.get("/user/".concat(e),{headers:{Authorization:"Bearer "+t}});case 4:c=n.sent,r=c.data,a({type:F,payload:r}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),a({type:B,payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(d,h))}),[r]);var O=function(){b(function(e,t,n){return function(){var n=Object(l.a)(o.a.mark((function n(a){var c,r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:D}),n.prev=1,n.next=4,Y.a.put("/follow",{followId:e},{headers:{Authorization:"Bearer "+t}});case 4:c=n.sent,r=c.data,console.log("data od fetch",r),a({type:G,payload:r}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),a({type:M,payload:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()}(d,h)),s(!1)},x=function(){b(function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(a){var c,r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"USER_UNFOLLOW_REQUEST"}),n.prev=1,n.next=4,Y.a.put("/unfollow",{unfollowId:e},{headers:{Authorization:"Bearer "+t}});case 4:c=n.sent,r=c.data,a({type:Q,payload:r}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),a({type:W,payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(d,h)),s(!0)};return Object(X.jsx)("div",{style:{maxWidth:"550px",margin:"0px auto"},children:i?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",borderBottom:"1px solid gray"},children:[Object(X.jsx)("div",{children:Object(X.jsx)("img",{src:i.user.pic,style:{width:"160px",height:"140px",borderRadius:"80px",marginBottom:"18px"}})}),Object(X.jsxs)("div",{children:[Object(X.jsx)("h4",{children:i.user.name}),Object(X.jsx)("h4",{children:i.user.email}),Object(X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"108%"},children:[Object(X.jsxs)("h6",{children:[i.posts.length," posts"]}),Object(X.jsxs)("h6",{children:[i.user.followers.length," followers"]}),Object(X.jsxs)("h6",{children:[i.user.following.length," following"]})]}),i.user.followers.includes(f)?Object(X.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){return x()},children:"Unfollow"}):Object(X.jsx)("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){return O()},children:"Follow"})]})]}),Object(X.jsx)("div",{className:"gallery",children:i.posts.map((function(e){return Object(X.jsx)("img",{style:{margin:"20px 20px 20px 0",height:"250px",width:"250px"},className:"item",src:e.photo,alt:e.title},e._id)}))})]}):Object(X.jsx)("div",{children:"Loading.."})})}),He=function(){Object(p.f)();var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(u.a)(r,2),i=s[0],b=s[1],h=localStorage.getItem("jwt"),f=Object(j.c)((function(e){return e.user})),O=(f.loading,f.loggedUserInfo),x=(f.error,Object(j.c)((function(e){return e.posts.posts})));Object(a.useEffect)((function(){x&&c(x.posts)}),[x]);var m=Object(j.b)();Object(a.useEffect)((function(){f.loggedUserInfo&&b(O.user._id)}),[f]);var g=function(e,t,n){v(e,t,n),_(t)},v=function(e,t,n){"like"===e&&y(n),"unlike"===e&&S(n)},y=function(e){return m(Pe(e,h))},S=function(e){return m(Fe(e,h))},_=function(e){var t=Object($.a)(n),a=O.user._id;t[e].likes.includes(a)?t[e].likes.pop(a):t[e].likes.push(a),c(t)};Object(a.useEffect)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(Me(h));case 1:case"end":return e.stop()}}),e)}))),[]);var E=function(e,t){return Object(X.jsx)(ee.a,{sm:"12",md:"6",lg:"4",children:Object(X.jsxs)(ce.a,{children:[Object(X.jsx)(re.a,{children:Object(X.jsx)(se.a,{children:Object(X.jsx)("h5",{className:"card-user-names",children:Object(X.jsx)(d.b,{to:e.postedBy._id!==i?"/profile/".concat(e.postedBy._id):"/profile",children:e.postedBy.name})})})}),Object(X.jsx)("div",{className:"image-container",children:Object(X.jsx)("img",{src:e.photo,alt:"Cart image cap"})}),Object(X.jsxs)(re.a,{children:[Object(X.jsxs)("i",{className:"material-icons",style:{color:"red"},children:[i&&e.likes.includes(i)?Object(X.jsx)("i",{className:"material-icons",onClick:function(){g("unlike",t,e._id)},children:"thumb_down"}):Object(X.jsx)("i",{className:"material-icons",onClick:function(){g("like",t,e._id)},children:"thumb_up"}),"favorite"]}),Object(X.jsxs)("h6",{children:[e.likes.length," likes "]}),Object(X.jsx)("h6",{children:e.title}),Object(X.jsx)("p",{children:e.body}),Object(X.jsx)("div",{className:"comments-container",children:e.comments.map((function(e){return Object(X.jsxs)("h6",{children:[e.postedBy.name,":",Object(X.jsxs)("span",{style:{fontWeight:"350"},children:[" ",e.text]})]},e._id)}))}),Object(X.jsx)("form",{onSubmit:function(a){a.preventDefault(),function(e,t,a){m(Be(e,t,h));var r=Object($.a)(n),s=O.user._id;r[a].comments.push({text:t,postedBy:{name:O.user.name,id:s},_id:"".concat(Math.random(0,2e8))}),c(r)}(e._id,a.target[0].value,t),a.target[0].value=""},children:Object(X.jsx)(ie.a,{children:Object(X.jsx)(oe.a,{placeholder:"add a comment"})})})]})]})})};return Object(X.jsx)(te.a,{style:{marginTop:"40px"},children:Object(X.jsx)(ne.a,{children:n&&i?n.map((function(e,t){return E(e,t)})):Object(X.jsx)("div",{className:"text-center p-5",children:Object(X.jsx)(ae.a,{color:"primary"})})})})},Xe=function(){var e=Object(p.f)(),t=Object(j.b)();return Object(a.useEffect)((function(){var n,a,c=JSON.parse(localStorage.getItem("userInfo")),r=localStorage.getItem("jwt");c?t((n=c.user._id,a=r,function(){var e=Object(l.a)(o.a.mark((function e(t){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:L}),e.prev=1,e.next=4,Y.a.get("/user/".concat(n),{headers:{Authorization:"Bearer "+a}});case 4:c=e.sent,r=c.data,t({type:R,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:A,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())):e.push("/signin")}),[]),Object(X.jsxs)(p.c,{children:[Object(X.jsx)(p.a,{exact:!0,path:"/",children:Object(X.jsx)(Qe,{})}),Object(X.jsx)(p.a,{path:"/signin",children:Object(X.jsx)(We,{})}),Object(X.jsx)(p.a,{path:"/signup",children:Object(X.jsx)(Ye,{})}),Object(X.jsx)(p.a,{exact:!0,path:"/profile",children:Object(X.jsx)(ze,{})}),Object(X.jsx)(p.a,{exact:!0,path:"/create",children:Object(X.jsx)(Je,{})}),Object(X.jsx)(p.a,{exact:!0,path:"/profile/:userid",children:Object(X.jsx)(Ke,{})}),Object(X.jsx)(p.a,{path:"/myfollowingposts",children:Object(X.jsx)(He,{})})]})};var qe=function(){return Object(X.jsxs)(d.a,{children:[Object(X.jsx)(Z,{}),Object(X.jsx)(Xe,{})]})},Ve=n(25),Ze=n(49),$e=n(50),et=n(18),tt=function(e,t){return Object(et.a)(Object(et.a)({},e),t)},nt={profilePicture:null,loggedUserInfo:null,externalFetchedUserInfo:null,loading:!1,error:null},at={},ct=Object(Ve.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:case _:case k:case T:case L:case D:return{loading:!0};case y:return tt(e,Object(et.a)(Object(et.a)({},e),{},{loading:!1,loggedUserInfo:t.payload}));case S:case w:case I:case N:case A:case B:case M:case W:return{loading:!1,error:t.payload};case E:case U:return{loading:!1};case C:return console.log("PAYLOAD",t.payload),tt(e,{loading:!1,loggedUserInfo:Object(et.a)(Object(et.a)({},e.loggedUserInfo),{},{user:t.payload})});case R:return tt(e,{loading:!1,loggedUserInfo:t.payload});case P:return tt(e,{loading:!0});case F:return tt(e,{loading:!1,externalFetchedUserInfo:t.payload});case G:case Q:return{loading:!1,data:Object(et.a)(Object(et.a)({},e),{},{followers:t.payload})};default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:case de:case he:case xe:case ve:case _e:case Ie:case Ne:return{loading:!0};case ue:case ye:case Le:return tt(e,{loading:!1,posts:t.payload});case pe:case be:case Oe:case ge:case Se:case we:case Ue:case Ce:case Re:return{loading:!1,error:t.payload};case je:case fe:return tt(e,{loading:!1,likes:t.payload});case me:return tt(e,{loading:!1,comments:t.payload});case Ee:return tt(e,{loading:!1,post:t.payload});case ke:return{loading:!1};case Te:return tt(e,{loading:!1,myPosts:t.payload});default:return e}}}),rt=Object(Ve.createStore)(ct,{},Object(Ze.composeWithDevTools)(Object(Ve.applyMiddleware)($e.a)));s.a.render(Object(X.jsx)(j.a,{store:rt,children:Object(X.jsx)(qe,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.714ae292.chunk.js.map